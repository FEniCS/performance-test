<head>
<!-- Load plotly.js into the DOM -->
<script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
</head>

<body>

  <H1> Performance Test </H1>
  <div id='myDiv'><!-- Plotly chart will be drawn inside this DIV --></div>

    <script>

var trace1 = {
    x: [],
    y: [],
    type: 'bar',
    name: 'Elastic'
};
var trace2 = {
    x: [],
    y: [],
    type: 'bar',
    name: 'Poisson'
};

fetch('https://fenics.github.io/performance-test/data.txt')
    .then((response) => {
	return response.json();
    })
    .then((myJson) => {
	for (var key in myJson){
	    console.log(key);
	    if (key.includes("Elastic")){
		var cores = key.split("_")[1].split(".")[0];
		trace1.x.push(parseInt(cores));
		trace1.y.push(parseInt(myJson[key].Solve));
	    }
	    if (key.includes("Poisson")){
		var cores = key.split("_")[1].split(".")[0];
		trace2.x.push(parseInt(cores));
		trace2.y.push(parseInt(myJson[key].Solve));
	    }
	}
	var data = [trace1, trace2];
	Plotly.newPlot('myDiv', data);
    });


console.log(trace1);
console.log(trace2);



</script>
</body>
