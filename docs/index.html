<head>
<!-- Load plotly.js into the DOM -->
<script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
</head>

<body>

  <H1> Performance Test </H1>
  <div id='myDiv'><!-- Plotly chart will be drawn inside this DIV --></div>

    <script>

var trace1 = {
    x: [],
    y: [],
    type: 'bar',
    name: 'Elastic'
};

var trace2 = {
    x: [],
    y: [],
    type: 'bar',
    name: 'Poisson'
};

var layout = {
title: {text: 'Solve time'},
xaxis: {title: {text: 'Nodes'}},
yaxis: {title: {text: 'time (s)'}}
};

fetch('https://raw.githubusercontent.com/js947/fenics-performance-results/master/results.json')
    .then((response) => {
	return response.json();
    })
    .then((myJson) => {
	for (var key in myJson){
	    var record = myJson[key];
	    // console.log(record.data);
	    for (var r in record.data){
		w = record.data[r];
		if (w.problem == "Poisson"){
		    // Ignore repeated values (only uses first)
		    if (!trace2.x.includes(w.nodes)){
			// console.log(w.Solve);
			trace2.y.push(w.Solve);
			// console.log(w.nodes);
			trace2.x.push(w.nodes);
		    }
		}
		if (w.problem == "Elastic"){
		    // Ignore repeated values (only uses first)
		    if (!trace1.x.includes(w.nodes)){
			// console.log(w.Solve);
			trace1.y.push(w.Solve);
			// console.log(w.nodes);
			trace1.x.push(w.nodes);
		    }
		}
	    }
	}
	var data = [trace1, trace2];
	Plotly.newPlot('myDiv', data, layout);
    });


console.log(trace1);
console.log(trace2);

</script>
</body>
